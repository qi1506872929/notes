# 定位

视觉格式化模型，大体上将页面中盒子的排列分为三种方式：

1. 常规流
2. 浮动：float
3. 定位：position

定位：手动控制元素在包含块中的精准位置

涉及的 CSS 属性：position

## position 属性

- 默认值：static，静态定位（不定位）
- relative：相对定位
- absolute：绝对定位
- fixed：固定定位

一个元素，只要 position 的取值不是 static，认为该元素是一个定位元素。

定位元素会脱离文档流（相对定位除外）

一个脱离了文档流的元素：

1. 文档流中的元素摆放时，会忽略脱离了文档流的元素。
2. 文档流中元素计算自动高度时，会忽略脱离了文档流的元素。

## 相对定位

不会导致元素脱离文档流，只是让元素在原来位置上进行偏移。

可以通过四个 CSS 属性对其设置位置：

- left
- right
- top
- bottom

盒子的偏移不会对其他盒子造成任何影响。

通常用来为绝对定位的元素提供包含块，很少偏移

## 绝对定位

1. 宽高为 auto，适应内容
2. 包含块变化：找祖先中第一个定位元素，该元素的 **填充盒** 为其包含块.若找不到，则他的包含块为整个网页（初始化包含块）

## 固定定位

其他情况和绝对定位完全一样。

包含块不同：固定为视口（浏览器的可视化窗口）

- 初始化包含块指的是整个网页（初始化包含块 > 视口 -> 滚动条）
- 视口指的是可以看到的网页部分区域

常用来做回到顶部、页面的菜单、广告

## 粘滞定位

position: sticky;

> 粘滞定位和相对定位的特点基本一致，不同的是粘滞定位可以在元素到达某个位置时将其固定

## 定位下的居中

某个方向居中：

1. 定宽（高）
2. 将左右（上下）的距离设置为零
3. 将左右（上下）margin 设置为 auto

绝对定位和固定定位中，margin 为 auto 时，会自动吸收剩余空间

## 多个定位元素重叠时

堆叠上下文

设置 z-index，通常情况下，该值越大，越靠近用户

只有定位元素设置 z-index 有效

z-index 可以是负数，如果是负数，遇到常规流、浮动元素，则会被其覆盖

## 补充

- 绝对定位、固定定位元素一定是块盒
- 绝对定位、固定定位元素一定不是浮动(同时存在，会强制 float：none)
- 没有外边距合并
